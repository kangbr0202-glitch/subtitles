<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>Live Subtitle</title>
<style>
  body {
    margin: 0;
    background: black;
    overflow: hidden;
  }
  .container {
    position: relative;
    width: 1920px;
    height: 1080px;
  }
  .background {
    position: absolute;
    top: 0; left: 0;
    width: 100%;
    height: 100%;
    background: url('background.png') no-repeat center/cover;
    z-index: 1;
  }
  .subtitle {
    position: absolute;
    bottom: 40px; /* 바의 세로 위치 맞춤 */
    left: 230px;  /* 로고 공간 피하기 */
    width: 1650px; /* 흰색 바 안쪽 */
    font-size: 50px;
    font-weight: bold;
    font-family: 'Noto Sans KR', sans-serif;
    color: black;
    text-align: left;
    z-index: 2;
    opacity: 0;
    transition: opacity 1s ease-in-out;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }
</style>
</head>
<body>
<div class="container">
  <div class="background"></div>
  <div id="subtitle" class="subtitle"></div>
</div>

<script>
// 구글 시트 CSV URL (시트를 공개하고 '웹에 게시' → CSV 링크 복사)
const sheetURL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vQgFaFeqUC2YT4uAoIjfw8FbOT7hEW4wQFOcqubPMcTlHmrl6Z6RZqyg8JwZBxCf1BJhxqjUQ2tBUAs/pub?output=csv";

let subtitles = [];
let index = 0;
const subtitleEl = document.getElementById("subtitle");

// CSV 데이터 가져오기
fetch(sheetURL)
  .then(res => res.text())
  .then(text => {
    subtitles = text.split("\n").map(row => row.trim()).filter(Boolean);
    if (subtitles.length > 0) {
      showNextSubtitle();
      setInterval(showNextSubtitle, 5000); // 5초마다 변경
    }
  });

function showNextSubtitle() {
  subtitleEl.style.opacity = 0; // 페이드아웃
  setTimeout(() => {
    subtitleEl.textContent = subtitles[index];
    subtitleEl.style.opacity = 1; // 페이드인
    index = (index + 1) % subtitles.length;
  }, 1000); // 1초 디졸브 시간
}
</script>
</body>
</html>
