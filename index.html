<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>Live Subtitle</title>
<style>
  body {
    margin: 0;
    background: black;
    overflow: hidden;
  }
  .container {
    position: relative;
    width: 1280px;
    height: 720px;
  }
  .background {
    position: absolute;
    top: 0; left: 0;
    width: 100%;
    height: 100%;
    background: url('background.png') no-repeat center/cover;
    z-index: 1;
  }
  .subtitle {
    position: absolute;
    bottom: 30px; /* 원래 40px에서 비율 맞춰 조금 줄임 */
    left: 150px;  /* 원래 230px에서 비율 맞춰 조정 */
    width: 980px; /* 원래 1650px에서 비율 맞춤 */
    font-size: 38px; /* 50px → 38px 비율 맞춤 */
    font-weight: bold;
    font-family: 'Noto Sans KR', sans-serif;
    color: white;
    text-align: left;
    z-index: 2;
    opacity: 0;
    transition: opacity 1s ease-in-out;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }
</style>
</head>
<body>
<div class="container">
  <div class="background"></div>
  <div id="subtitle" class="subtitle"></div>
</div>

<script>
const sheetURL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vQgFaFeqUC2YT4uAoIjfw8FbOT7hEW4wQFOcqubPMcTlHmrl6Z6RZqyg8JwZBxCf1BJhxqjUQ2tBUAs/pub?output=csv";

let subtitles = [];
let index = 0;
const subtitleEl = document.getElementById("subtitle");

fetch(sheetURL)
  .then(res => res.text())
  .then(text => {
    subtitles = text.split("\n").slice(1)
                    .map(row => row.trim())
                    .filter(Boolean);
    if (subtitles.length > 0) {
      showNextSubtitle();
      setInterval(showNextSubtitle, 5000);
    }
  })
  .catch(err => {
    console.error("CSV 데이터 로딩 중 오류:", err);
  });

function showNextSubtitle() {
  subtitleEl.style.opacity = 0;
  setTimeout(() => {
    subtitleEl.textContent = subtitles[index];
    subtitleEl.style.opacity = 1;
    index = (index + 1) % subtitles.length;
  }, 1000);
}
</script>
</body>
</html>
